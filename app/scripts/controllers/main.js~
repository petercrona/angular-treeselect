'use strict';

/**
 * @ngdoc function
 * @name multiselectDialogApp.controller:MainCtrl
 * @description
 * # MainCtrl
 * Controller of the multiselectDialogApp
 */
angular.module('multiselectDialogApp')
  .controller('MainCtrl', function ($scope, $timeout, Tree, TreeHelper, ngDialog) {

	  var myTree = Tree.create();
	  var swe = Tree.addChild(myTree, {
		  name: 'Sverige'
	  });

	  var gbg = Tree.addChild(swe, {
		  name: 'GÃ¶teborg'
	  });

	  Tree.addChild(gbg, {
		  name: 'Nordstan'
	  });

	  Tree.addChild(gbg, {
		  name: 'Torslanda'
	  });

	  Tree.addChild(swe, {
		  name: 'Stockholm'
	  });

	  Tree.addChild(swe, {
		  name: 'Halmstad'
	  });

	  Tree.addChild(myTree, {
		  name: 'Norge'
	  });

	  $scope.treeData = myTree;

	  $scope.saveHandler = function(tree, name, desc) {
		  console.log(tree, name, desc);
		  ngDialog.close();
	  };

	  $scope.openDialog = function() {
		  var miniScope = $scope.$new(true);
		  miniScope.saveHandler = $scope.saveHandler;
		  miniScope.treeData = $scope.treeData;
		  ngDialog.open({
			  template: 'templateId',
			  className: 'ngdialog-theme-default ngdialog-theme-wide',
			  scope: miniScope
		  });
	  }

  });
